<!DOCTYPE html>
<html lang="en">
<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<title>Pike Admin - Free Bootstrap 4 Admin Template</title>
		<meta name="description" content="Free Bootstrap 4 Admin Theme | Pike Admin">
		

		<!-- Favicon -->
		<link rel="shortcut icon" href="assets/images/favicon.ico">

		<!-- Bootstrap CSS -->
		<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		
		<!-- Font Awesome CSS -->
		<link href="assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		
		<!-- Custom CSS -->
		<link href="assets/css/style.css" rel="stylesheet" type="text/css" />
		
		<!-- BEGIN CSS for this page -->
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css"/>
		<!-- END CSS for this page -->

  <!--<style>-->
    <!--.divcss5-b,.divcss5-b{ width:150px; height:100px; float:left; border:1px solid #F00}-->
    <!--.divcss5-b{ margin-left:10px;overflow-y:scroll; overflow-x:scroll;}-->
    <!--/* css注释说明：设置第二个盒子与第一个盒子间距为10px，并设置了横纵滚动条样式 */-->
  <!--</style>-->
<!--<style type="text/css">-->
  <!--.www{-->
    <!--padding-left: 24px;-->
    <!--padding-right: 24px;-->
    <!--min-height: calc(100% - 160px);-->
    <!--height: calc(100% - 120px);-->
    <!--overflow-y: auto;-->

  <!--}-->

<!--</style>-->

</head>

<script>
  function oneFull() {
    $.ajax({
      url: '/oneFull',
      type: 'get',
    })
  }

  function oneIncrement() {
    $.ajax({
      url: '/oneIncrement',
      type: 'get',
    })
  }

  function MysqltoFile() {
    $.ajax({
      url: '/MysqltoFile',
      type: 'get',
    })
  }

  function MongoDBtoMysql() {
    $.ajax({
      url: '/MongoDBtoMysql',
      type: 'get',
    })
  }

  function logout() {
    $.ajax({
      url: '/logout',
      type: 'get',
      success: function (d) {
        if (d === "success") {
          window.location.href = 'login.html';
        } else {
          window.alert("注销失败");
        }
      },
      error: function (XMLHttpRequest, textStatus, errorThrown) {
        alert(XMLHttpRequest.status); // 200
        alert(textStatus); // parsererror
        alert(errorThrown); // SyntaxError: Unexpected end of input
      }
    })
  }
</script>

<body class="adminbody">

<script type="text/javascript">
  var websocket = null;

  //判断当前浏览器是否支持WebSocket
  if('WebSocket' in window){
    websocket = new WebSocket("ws://localhost:8066/websocket/1");
  }
  else{
    alert('Not support websocket')
  }

  //连接发生错误的回调方法
  websocket.onerror = function(){
    setMessageInnerHTML("error");
  };

  //连接成功建立的回调方法
  websocket.onopen = function(event){
    setMessageInnerHTML("open");
  }

  //接收到消息的回调方法
  websocket.onmessage = function(event){
    setMessageInnerHTML(event.data);
  }

  //连接关闭的回调方法
  websocket.onclose = function(){
    setMessageInnerHTML("close");
  }

  //监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接，防止连接还没断开就关闭窗口，server端会抛异常。
  window.onbeforeunload = function(){
    websocket.close();
  }

  //将消息显示在网页上
  function setMessageInnerHTML(innerHTML){
    document.getElementById('message').innerHTML += innerHTML + '<br/>';
  }

  //关闭连接
  function closeWebSocket(){
    websocket.close();
  }

</script>

<div id="main">

  <div class="headerbar">

    <!-- LOGO -->
    <div class="headerbar-left">
      <a href="index.html" class="logo"><img alt="Logo" src="assets/images/logo.png" /> <span>Admin</span></a>
    </div>

    <nav class="navbar-custom">

      <ul class="list-inline float-right mb-0">




        <li class="list-inline-item dropdown notif">
          <a class="nav-link dropdown-toggle nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
            <img src="assets/images/avatars/admin.png" alt="Profile image" class="avatar-rounded">
          </a>
          <div class="dropdown-menu dropdown-menu-right profile-dropdown">
            <!-- item-->
            <div class="dropdown-item noti-title">
              <h5 class="text-overflow"><small>Hello, admin</small> </h5>
            </div>


            <!-- item-->
            <a href="#" onclick="logout()" class="dropdown-item notify-item">
              <i class="fa fa-power-off"></i> <span>Logout</span>
            </a>

          </div>
        </li>

      </ul>

      <ul class="list-inline menu-left mb-0">
        <li class="float-left">
          <button class="button-menu-mobile open-left">
            <i class="fa fa-fw fa-bars"></i>
          </button>
        </li>
      </ul>

    </nav>

  </div>
  <!-- End Navigation -->
	
 
	<!-- Left Sidebar -->
	<div class="left main-sidebar">
	
		<div class="sidebar-inner leftscroll">

			<div id="sidebar-menu">
        
			<ul>

					<li class="submenu">
						<a class="active" href="index.html"><i class="fa fa-fw fa-bars"></i><span> 控制台 </span> </a>
                    </li>

										
                    <li class="submenu">
                        <a href="#"><i class="fa fa-fw fa-tv"></i> <span> 数据同步与迁移 </span> <span class="menu-arrow"></span></a>
                            <ul class="list-unstyled">
                                <li><a href="#" onclick="oneFull()">一次全量同步</a></li>
                                <li><a href="#" onclick="oneIncrement()">一次增量同步</a></li>
                                <li><a href="#" onclick="MysqltoFile()">将MySQL表中数据转移至文件</a></li>
                                <li><a href="#" onclick="MongoDBtoMysql()">将MongoDB表中数据转移至MySQL</a></li>
                            </ul>
                    </li>

					
                    <li class="submenu">
						<a href="#"><i class="fa fa-fw fa-th"></i> <span> 定时增量数据同步 </span> <span class="menu-arrow"></span></a>
                            <ul class="list-unstyled">
                                <li><a href="star-rating.html">开始定时任务</a></li>
								<li><a href="range-sliders.html">暂停某一任务</a></li>
                              <li><a href="range-sliders.html">暂停全部任务</a></li>
								<li><a href="tree-view.html">恢复某一任务</a></li>
                              <li><a href="tree-view.html">恢复全部任务</a></li>
								<li><a href="sweetalert.html">显示任务信息</a></li>
								<li><a href="calendar.html">修改任务</a></li>
								<li><a href="gmaps.html">新增任务</a></li>
								<li><a href="counter-up.html">删除某一任务</a></li>
                            </ul>
                    </li>

					
            </ul>

            <div class="clearfix"></div>

			</div>
        
			<div class="clearfix"></div>

		</div>

	</div>
	<!-- End Sidebar -->


    <div class="content-page">
	
		<!-- Start content -->
      <div id="message" class="www" style="position:absolute; height:800px; overflow:auto; overflow-x:auto">
      </div>


		<!-- END content -->

    </div>
	<!-- END content-page -->


</div>
<!-- END main -->

<script src="assets/js/modernizr.min.js"></script>
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/moment.min.js"></script>
		
<script src="assets/js/popper.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>

<script src="assets/js/detect.js"></script>
<script src="assets/js/fastclick.js"></script>
<script src="assets/js/jquery.blockUI.js"></script>
<script src="assets/js/jquery.nicescroll.js"></script>

<!-- App js -->
<script src="assets/js/pikeadmin.js"></script>

<!-- BEGIN Java Script for this page -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>

	<!-- Counter-Up-->
	<script src="assets/plugins/waypoints/lib/jquery.waypoints.min.js"></script>
	<script src="assets/plugins/counterup/jquery.counterup.min.js"></script>			

	<script>
		$(document).ready(function() {
			// data-tables
			$('#example1').DataTable();
					
			// counter-up
			$('.counter').counterUp({
				delay: 10,
				time: 600
			});
		} );		
	</script>
	
	<script>
	var ctx1 = document.getElementById("lineChart").getContext('2d');
	var lineChart = new Chart(ctx1, {
		type: 'bar',
		data: {
			labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
			datasets: [{
					label: 'Dataset 1',
					backgroundColor: '#3EB9DC',
					data: [10, 14, 6, 7, 13, 9, 13, 16, 11, 8, 12, 9] 
				}, {
					label: 'Dataset 2',
					backgroundColor: '#EBEFF3',
					data: [12, 14, 6, 7, 13, 6, 13, 16, 10, 8, 11, 12]
				}]
				
		},
		options: {
						tooltips: {
							mode: 'index',
							intersect: false
						},
						responsive: true,
						scales: {
							xAxes: [{
								stacked: true,
							}],
							yAxes: [{
								stacked: true
							}]
						}
					}
	});


	var ctx2 = document.getElementById("pieChart").getContext('2d');
	var pieChart = new Chart(ctx2, {
		type: 'pie',
		data: {
				datasets: [{
					data: [12, 19, 3, 5, 2, 3],
					backgroundColor: [
						'rgba(255,99,132,1)',
						'rgba(54, 162, 235, 1)',
						'rgba(255, 206, 86, 1)',
						'rgba(75, 192, 192, 1)',
						'rgba(153, 102, 255, 1)',
						'rgba(255, 159, 64, 1)'
					],
					label: 'Dataset 1'
				}],
				labels: [
					"Red",
					"Orange",
					"Yellow",
					"Green",
					"Blue"
				]
			},
			options: {
				responsive: true
			}
	 
	});


	var ctx3 = document.getElementById("doughnutChart").getContext('2d');
	var doughnutChart = new Chart(ctx3, {
		type: 'doughnut',
		data: {
				datasets: [{
					data: [12, 19, 3, 5, 2, 3],
					backgroundColor: [
						'rgba(255,99,132,1)',
						'rgba(54, 162, 235, 1)',
						'rgba(255, 206, 86, 1)',
						'rgba(75, 192, 192, 1)',
						'rgba(153, 102, 255, 1)',
						'rgba(255, 159, 64, 1)'
					],
					label: 'Dataset 1'
				}],
				labels: [
					"Red",
					"Orange",
					"Yellow",
					"Green",
					"Blue"
				]
			},
			options: {
				responsive: true
			}
	 
	});
	</script>
<!-- END Java Script for this page -->

</body>
</html>